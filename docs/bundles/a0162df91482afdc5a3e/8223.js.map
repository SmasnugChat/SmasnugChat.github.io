{"version":3,"file":"bundles/a0162df91482afdc5a3e/8223.js","mappings":"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","sources":["webpack://element-web/./src/components/views/rooms/wysiwyg_composer/components/EditionButtons.tsx","webpack://element-web/./src/components/views/rooms/wysiwyg_composer/hooks/useInitialContent.ts","webpack://element-web/./src/components/views/rooms/wysiwyg_composer/EditWysiwygComposer.tsx","webpack://element-web/./src/components/views/rooms/wysiwyg_composer/hooks/useWysiwygEditActionHandler.ts","webpack://element-web/./src/components/views/rooms/wysiwyg_composer/hooks/useEditing.ts","webpack://element-web/./src/components/views/rooms/wysiwyg_composer/utils/createMessageContent.ts","webpack://element-web/./src/components/views/rooms/wysiwyg_composer/utils/message.ts","webpack://element-web/./src/components/views/rooms/wysiwyg_composer/utils/isContentModified.ts"],"names":["EditionButtons","onCancelClick","onSaveClick","isSaveDisabled","React","className","AccessibleButton","kind","onClick","_t","disabled","useInitialContent","editorStateTransfer","roomContext","useRoomContext","mxClient","useMatrixClientContext","useMemo","room","partCreator","CommandPartCreator","parts","hasEditorState","serializedParts","getSerializedParts","map","p","deserializePart","getEvent","getContent","format","_editorStateTransfer$","formatted_body","replace","getFormattedContent","parseEvent","shouldEscape","SettingsStore","getValue","reduce","content","part","text","parseEditorStateTransfer","Content","forwardRef","composerFunctions","composerElement","composerContext","useComposerContext","timeoutId","useRef","handler","useCallback","payload","_payload$context","current","context","TimelineRenderingType","Room","action","Action","FocusEditMessageComposer","focusComposer","ComposerInsert","timelineRenderingType","composerType","ComposerType","Edit","setSelection","selection","then","insertText","useDispatcher","defaultDispatcher","useWysiwygEditActionHandler","EditWysiwygComposer","_ref","props","_objectWithoutProperties","_excluded","defaultContextValue","getDefaultContextValue","initialContent","isReady","undefined","editMessage","endEditing","onChange","setIsSaveDisabled","useState","setContent","_content","_isSaveDisabled","async","useEditing","ComposerContext","Provider","value","WysiwygComposer","_extends","classNames","onSend","ref","EMOTE_PREFIX","isMatrixEvent","e","MatrixEvent","createMessageContent","message","isHTML","relation","replyToEvent","editedEvent","isEditing","isReply","Boolean","replyEventId","isReplyAndEditing","isEmote","startsWith","slice","length","body","richToPlain","document","DOMParser","parseFromString","Array","from","querySelectorAll","forEach","mention","getAttribute","replaceWith","innerText","innerHTML","href","permalinkParts","parsePermalink","isNotNull","roomIdOrAlias","convertPlainTextToBody","bodyPrefix","mxEvent","lines","split","l","trim","getTextReplyFallback","formattedBodyPrefix","html","mxReply","querySelector","outerHTML","getHtmlReplyFallback","msgtype","MsgType","Emote","Text","isMarkdownEnabled","formattedBody","plainToRich","_objectSpread","attachRelation","rel_type","event_id","getId","addReplyToMessageContent","sendMessage","params","roomId","posthogEvent","eventName","messageType","inThread","THREAD_RELATION_TYPE","name","PosthogAnalytics","instance","trackEvent","cmd","args","getCommand","threadId","commandSuccessful","runSlashCommand","category","CommandCategories","messages","effects","sendAnyway","shouldSendAnyway","dis","dispatch","FocusAComposer","decorateStartSendingTime","prom","doMaybeLocalRoomAction","actualRoomId","event","CHAT_EFFECTS","effect","containsEmoji","emojis","command","resp","sendRoundTripMetric","getThread","editContent","newContent","cancelPreviousPendingEdit","createRedactEventDialog","onCloseDialog","response","getRoomId","oldContent","isContentModified","threadRootId"],"sourceRoot":""}