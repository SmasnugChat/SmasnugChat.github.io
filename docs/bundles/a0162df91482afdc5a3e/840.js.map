{"version":3,"file":"bundles/a0162df91482afdc5a3e/840.js","mappings":"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","sources":["webpack://element-web/./src/components/views/rooms/wysiwyg_composer/utils/editing.ts","webpack://element-web/./src/components/views/rooms/wysiwyg_composer/utils/createMessageContent.ts","webpack://element-web/./src/components/views/rooms/wysiwyg_composer/utils/message.ts","webpack://element-web/./src/components/views/rooms/wysiwyg_composer/utils/isContentModified.ts"],"names":["endEditing","roomContext","dis","dispatch","action","Action","EditEvent","event","timelineRenderingType","FocusSendMessageComposer","context","cancelPreviousPendingEdit","mxClient","editorStateTransfer","previousEdit","getEvent","replacingEvent","status","EventStatus","QUEUED","NOT_SENT","cancelPendingEvent","EMOTE_PREFIX","isMatrixEvent","e","MatrixEvent","async","createMessageContent","message","isHTML","relation","replyToEvent","editedEvent","isEditing","isReply","Boolean","replyEventId","isReplyAndEditing","isEmote","startsWith","slice","length","body","richToPlain","content","document","DOMParser","parseFromString","Array","from","querySelectorAll","forEach","mention","getAttribute","replaceWith","innerText","innerHTML","href","permalinkParts","parsePermalink","isNotNull","roomIdOrAlias","convertPlainTextToBody","bodyPrefix","mxEvent","getContent","lines","split","map","l","trim","getTextReplyFallback","formattedBodyPrefix","html","formatted_body","mxReply","querySelector","outerHTML","getHtmlReplyFallback","msgtype","MsgType","Emote","Text","isMarkdownEnabled","SettingsStore","getValue","formattedBody","plainToRich","format","_objectSpread","attachRelation","rel_type","event_id","getId","addReplyToMessageContent","sendMessage","_ref","_content","params","_objectWithoutProperties","_excluded","room","roomId","posthogEvent","eventName","messageType","inThread","THREAD_RELATION_TYPE","name","PosthogAnalytics","instance","trackEvent","cmd","args","getCommand","threadId","commandSuccessful","runSlashCommand","category","CommandCategories","messages","effects","sendAnyway","shouldSendAnyway","FocusAComposer","decorateStartSendingTime","prom","doMaybeLocalRoomAction","actualRoomId","CHAT_EFFECTS","effect","containsEmoji","emojis","command","then","resp","sendRoundTripMetric","editMessage","getThread","editContent","newContent","createRedactEventDialog","onCloseDialog","response","getRoomId","oldContent","isContentModified","threadRootId"],"sourceRoot":""}